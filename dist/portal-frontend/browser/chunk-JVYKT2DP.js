import{a as Ot,b as kt}from"./chunk-6T5XIYJ5.js";import{a as Bt,b as Pt}from"./chunk-X2N4LBF3.js";import{a as Fe,b as Ne,c as ft,d as gt}from"./chunk-T2CY23XL.js";import{a as vt,b as _t}from"./chunk-B2W5NOZS.js";import"./chunk-4JLXW5S6.js";import{a as T,m as ge,n as Tt,o as Mt}from"./chunk-WY5L5QV5.js";import"./chunk-WYL7NH4F.js";import{b as Pe,c as Le,d as je,e as $e,f as It,g as Ft,i as Nt,j as ze,k as qe,n as Rt}from"./chunk-U446ZUSE.js";import"./chunk-7XV6CRBL.js";import{a as Vt,b as At}from"./chunk-LFBU7IBC.js";import"./chunk-6OSMVD66.js";import"./chunk-IAKHD2KQ.js";import"./chunk-KTZAFNHT.js";import"./chunk-L2YMTAJ4.js";import{e as P,f as L}from"./chunk-SQDM7FYD.js";import"./chunk-MUUDK5FO.js";import"./chunk-GS33KFGJ.js";import{h as Re,i as Oe,k as ke,l as Be,m as bt,n as ht,o as Ct,p as yt,q as ue,s as xt,t as Et,u as St,v as wt,w as Dt,x as fe}from"./chunk-OHCSBWXS.js";import"./chunk-APKN3PFA.js";import"./chunk-X6GEXHSG.js";import{a as Ae,b as Ie}from"./chunk-MX4UQD2B.js";import"./chunk-X5B2VV3T.js";import"./chunk-ZTWDMVRM.js";import{a as we}from"./chunk-P7FDEGEE.js";import"./chunk-XSSXK7EZ.js";import{a as ut}from"./chunk-PXO2TRVQ.js";import"./chunk-PWTX4GCB.js";import{a as pt,b as U,c as k,d as ct,e as H,f as re,h as De,i as le,j as se,k as de,l as mt,m as Te,n as Me,o as Q,p as pe,q as ce}from"./chunk-HXGQMCX4.js";import{a as ae}from"./chunk-TDXTCVPJ.js";import"./chunk-WTM76CTQ.js";import{c as me,d as B,e as A}from"./chunk-AXYD25ST.js";import{e as Ve,i as X,n as V}from"./chunk-VBSZGXZN.js";import{$ as w,Bc as R,Db as W,Dc as lt,Eb as Z,Fb as ee,Gb as I,Hb as d,Ib as S,Jb as E,Ka as et,Kb as nt,Kc as st,Lb as $,Lc as dt,Nc as oe,Ob as M,Pb as D,Qb as ve,R as Je,Rb as ot,S as Y,Sb as Ee,T as Ke,Ta as s,Ua as ye,Ub as Se,Wa as xe,Y as C,Yb as z,Za as O,_b as q,a as Ce,aa as We,ab as tt,b as Xe,da as F,db as v,ea as _,eb as K,fa as b,fb as p,ib as it,jb as Ye,kb as y,mb as ie,nb as ne,ob as a,pa as Ze,pb as r,qb as h,ub as x,wb as u,wc as G,xb as m,yc as at,zc as rt}from"./chunk-HOTPW52P.js";function ti(t,l){if(t&1&&h(0,"app-error-input",6),t&2){let i=m();p("message",i.getErrorMessage("subject",i.form))}}function ii(t,l){if(t&1&&h(0,"app-error-input",6),t&2){let i=m();p("message",i.getErrorMessage("place",i.form))}}function ni(t,l){if(t&1&&h(0,"app-error-input",6),t&2){let i=m();p("message",i.getErrorMessage("type",i.form))}}function oi(t,l){if(t&1&&h(0,"app-error-input",6),t&2){let i=m(2);p("message",i.getErrorMessage("finalized",i.form))}}function ai(t,l){if(t&1&&(a(0,"label",11),d(1,"\xBFConvocatoria finalizada?"),r(),h(2,"p-selectButton",18),v(3,oi,1,1,"app-error-input",6)),t&2){let i=m(),e;s(2),p("options",i.stateOptions)("allowEmpty",!1),s(),y(3,(e=i.form.get("finalized"))!=null&&e.invalid&&((e=i.form.get("finalized"))!=null&&e.dirty)?3:-1)}}function ri(t,l){if(t&1&&h(0,"app-error-input",6),t&2){let i=m(2);p("message",i.getErrorMessage("attendanceDeadline",i.form))}}function li(t,l){if(t&1&&(a(0,"span",3),h(1,"p-calendar",19),a(2,"label",20),d(3,"Fecha & hora de fin de asistencia"),r()(),v(4,ri,1,1,"app-error-input",6)),t&2){let i=m(),e;s(),p("showTime",!0)("stepSecond",0)("showButtonBar",!0),s(3),y(4,(e=i.form.get("attendanceDeadline"))!=null&&e.invalid&&((e=i.form.get("attendanceDeadline"))!=null&&e.dirty)?4:-1)}}function si(t,l){if(t&1&&h(0,"app-error-input",6),t&2){let i=m();p("message",i.getErrorMessage("date",i.form))}}function di(t,l){}function pi(t,l){if(t&1&&h(0,"app-error-input",6),t&2){let i=m(2);p("message",i.getErrorMessage("description",i.form))}}function ci(t,l){if(t&1&&(a(0,"div",21)(1,"label",11),d(2,"Descripci\xF3n"),r(),a(3,"p-editor",22),v(4,di,0,0,"ng-template",23),r(),v(5,pi,1,1,"app-error-input",6),r()),t&2){let i=m(),e;s(3),p("modules",i.quillModules),s(2),y(5,(e=i.form.get("description"))!=null&&e.invalid&&((e=i.form.get("description"))!=null&&e.dirty)?5:-1)}}function mi(t,l){if(t&1){let i=x();a(0,"p-button",24),u("onClick",function(){_(i);let n=m();return b(n.handleAccept())}),r(),a(1,"p-button",25),u("onClick",function(){_(i);let n=m();return n.modalData.response=null,b(n.handleClose.emit())}),r()}t&2&&(p("raised",!0)("rounded",!0),s(),p("raised",!0)("rounded",!0))}var ui=()=>({width:"100%"}),jt=(()=>{let l=class l{constructor(){this.modalData={visible:!1,title:"",data:null,response:null},this.handleClose=new O,this.fb=C(Te),this.storageService=C(we),this.getErrorMessage=Ie,this.form=this.fb.group({id:[""],subject:["",k.required],description:["",k.required],date:["",k.required],place:["",k.required],type:["",k.required],attendanceDeadline:[""],createdBy:["",k.required],updatedBy:[""],finalized:[!1]}),this.typeOptions=[{label:"Reuni\xF3n ordinaria de directivos",value:T.MEETING_ORDINARY},{label:"Reuni\xF3n extraordinaria de directivos",value:T.MEETING_EXTRAORDINARY},{label:"Asamblea extraordinaria",value:T.ASSEMBLY_EXTRAORDINARY},{label:"Asamblea ordinaria",value:T.ASSEMBLY_ORDINARY},{label:"Sesi\xF3n de directivos",value:T.SESSION}],this.stateOptions=[{label:"No",value:!1},{label:"Si",value:!0}],this.quillModules={toolbar:[[{size:["small",!1,"large","huge"]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],[{align:[]}]]}}handleAccept(){let e=this.storageService.getAuth();e&&(this.form.patchValue({createdBy:e.id.toString()}),this.form.patchValue({updatedBy:e.id.toString()})),this.form.valid?(this.modalData.response=this.form.value,this.handleClose.emit()):Object.values(this.form.controls).forEach(n=>{n.invalid&&(n.markAsDirty(),n.updateValueAndValidity({onlySelf:!0}))})}getTemplate(){let e=this.form.get("type")?.value;return e===T.ASSEMBLY_EXTRAORDINARY||e===T.ASSEMBLY_ORDINARY?(this.form.get("attendanceDeadline")?.setValidators([k.required,this.validateDates]),this.form.get("attendanceDeadline")?.updateValueAndValidity({onlySelf:!0}),'<p><strong>ORDEN DEL DIA:</strong></p><p><br></p><ol><li>Saludo y Bienvenida a los asistentes por parte de </li><li>Lectura y Aprobaci\xF3n del <strong>ORDEN DEL DIA.</strong></li></ol><p><br></p><p><br></p><p><strong>NOTA</strong>: Se solicita encarecidamente <strong>Puntualidad</strong>. La Inasistencia dar\xE1 lugar a una multa de $20 (veinte d\xF3lares americanos).</p><p><br></p><p><br></p><p><br></p><p class="ql-align-center"><strong>LA DIRECTIVA</strong></p>'):e===T.MEETING_ORDINARY||e===T.MEETING_EXTRAORDINARY?(this.form.get("attendanceDeadline")?.clearValidators(),this.form.get("attendanceDeadline")?.updateValueAndValidity({onlySelf:!0}),'<p><strong>ORDEN DEL DIA:</strong></p><p><br></p><ol><li>Saludo y Bienvenida a los asistentes por parte de </li><li>Lectura y Aprobaci\xF3n del <strong>ORDEN DEL DIA.</strong></li></ol><p><br></p><p><br></p><p><strong>NOTA</strong>: Se solicita encarecidamente <strong>Puntualidad</strong>. La Inasistencia dar\xE1 lugar a una multa de $20 (veinte d\xF3lares americanos).</p><p><br></p><p><br></p><p><br></p><p class="ql-align-center"><strong>LA DIRECTIVA</strong></p>'):e===T.SESSION?(this.form.get("attendanceDeadline")?.clearValidators(),this.form.get("attendanceDeadline")?.updateValueAndValidity({onlySelf:!0}),'<p><strong>ORDEN DEL DIA:</strong></p><p><br></p><ol><li>Saludo y Bienvenida a los asistentes por parte de </li><li>Lectura y Aprobaci\xF3n del <strong>ORDEN DEL DIA.</strong></li></ol><p><br></p><p><br></p><p><strong>NOTA</strong>: Se solicita encarecidamente <strong>Puntualidad</strong>. La Inasistencia dar\xE1 lugar a una multa de $20 (veinte d\xF3lares americanos).</p><p><br></p><p><br></p><p><br></p><p class="ql-align-center"><strong>LA DIRECTIVA</strong></p>'):""}ngOnChanges(e){e.modalData&&(this.form.reset(),this.modalData.data&&(this.form.patchValue(Xe(Ce({},this.modalData.data),{date:new Date(this.modalData.data.date),attendanceDeadline:this.modalData.data.attendanceDeadline?new Date(this.modalData.data.attendanceDeadline):null})),this.form.get("finalized")?.setValidators(k.required),this.form.get("updatedBy")?.setValidators(k.required)))}ngOnInit(){this.form.setValidators(this.validateDates)}validateDates(e){let n=e.get("date")?.value,o=e.get("attendanceDeadline")?.value;return n&&o&&o<=n?(e.get("attendanceDeadline")?.setErrors({lowerDate:!0}),{lowerDate:!0}):null}};l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=w({type:l,selectors:[["app-convocation-form"]],inputs:{modalData:"modalData"},outputs:{handleClose:"handleClose"},standalone:!0,features:[F,M],decls:31,vars:19,consts:[["id","dialog","styleClass","w-10 md:w-8 lg:w-8",3,"header","visible","modal","draggable","resizable","visibleChange","onHide"],[1,"pt-4","grid","row-gap-3","h-full",3,"formGroup"],[1,"col-12","lg:col-6"],[1,"p-float-label"],["pInputText","","id","subject","formControlName","subject","autocomplete","off",1,"w-full"],["for","subject"],[3,"message"],[1,"col-12","lg:col-3"],["pInputText","","id","place","formControlName","place","autocomplete","off",1,"w-full"],["for","place"],[1,"col-12","lg:col-3","relative"],["for","severity",1,"text-xs","text-gray-500","block","ml-3","absolute","left-0",2,"top","-1rem"],["formControlName","type","placeholder","Seleccione un tipo","appendTo","body",3,"options","onChange"],[1,"col-12","lg:col-6","relative"],["formControlName","date","id","date","dateFormat","dd/mm/yy","appendTo","body","styleClass","w-full",3,"showTime","showButtonBar"],["for","date"],["class","col-12 h-full relative"],["pTemplate","footer"],["formControlName","finalized","optionValue","value",3,"options","allowEmpty"],["formControlName","attendanceDeadline","id","attendanceDeadline","dateFormat","dd/mm/yy","appendTo","body","styleClass","w-full",3,"showTime","stepSecond","showButtonBar"],["for","attendanceDeadline"],[1,"col-12","h-full","relative"],["formControlName","description",3,"modules"],["pTemplate","header"],["label","Aceptar","severity","success",3,"raised","rounded","onClick"],["label","Cancelar","severity","danger",3,"raised","rounded","onClick"]],template:function(n,o){if(n&1&&(a(0,"p-dialog",0),u("visibleChange",function(f){return o.modalData.visible=f})("onHide",function(){return o.modalData.response=null,o.handleClose.emit()}),a(1,"form",1)(2,"div",2)(3,"span",3),h(4,"input",4),a(5,"label",5),d(6,"Asunto"),r()(),v(7,ti,1,1,"app-error-input",6),r(),a(8,"div",7)(9,"span",3),h(10,"input",8),a(11,"label",9),d(12,"Lugar"),r()(),v(13,ii,1,1,"app-error-input",6),r(),a(14,"div",10)(15,"label",11),d(16,"Tipo de convocatoria"),r(),a(17,"p-dropdown",12),u("onChange",function(){return o.form.patchValue({description:o.getTemplate()})}),r(),v(18,ni,1,1,"app-error-input",6),r(),a(19,"div",13),v(20,ai,4,3),r(),a(21,"div",7),v(22,li,5,4),r(),a(23,"div",7)(24,"span",3),h(25,"p-calendar",14),a(26,"label",15),d(27,"Fecha & hora de inicio"),r()(),v(28,si,1,1,"app-error-input",6),r(),v(29,ci,6,2,"div",16),r(),v(30,mi,2,4,"ng-template",17),r()),n&2){let c,f,g,N,be,he,Ue;p("header",o.modalData.title)("visible",o.modalData.visible)("modal",!0)("draggable",!1)("resizable",!1),s(),p("formGroup",o.form),s(6),y(7,(c=o.form.get("subject"))!=null&&c.invalid&&((c=o.form.get("subject"))!=null&&c.dirty)?7:-1),s(6),y(13,(f=o.form.get("place"))!=null&&f.invalid&&((f=o.form.get("place"))!=null&&f.dirty)?13:-1),s(4),it(D(18,ui)),p("options",o.typeOptions),s(),y(18,(g=o.form.get("type"))!=null&&g.invalid&&((g=o.form.get("type"))!=null&&g.dirty)?18:-1),s(2),y(20,(N=o.form.get("id"))!=null&&N.value?20:-1),s(2),y(22,((be=o.form.get("type"))==null?null:be.value)==="ASSEMBLY_ORDINARY"||((be=o.form.get("type"))==null?null:be.value)==="ASSEMBLY_EXTRAORDINARY"?22:-1),s(3),p("showTime",!0)("showButtonBar",!0),s(3),y(28,(he=o.form.get("date"))!=null&&he.invalid&&((he=o.form.get("date"))!=null&&he.dirty)?28:-1),s(),y(29,(Ue=o.form.get("type"))!=null&&Ue.value?29:-1)}},dependencies:[L,P,V,ce,pe,Be,ke,B,A,$e,je,Q,le,U,H,re,se,de,Ae,Oe,Re,yt,Ct]});let t=l;return t})();var Qe=(()=>{let l=class l{constructor(){this.END_POINT=ae.API_URL+"/protected/convocation",this.http=C(oe)}getConvocations(e,n,o,c,f){let g=new dt;return e&&(g=g.append("subject",e)),n&&(g=g.append("start",n.getTime().toString())),o&&(g=g.append("end",o.getTime().toString())),c&&(g=g.append("type",c)),f&&(g=g.append("page",f.toString())),this.http.get(this.END_POINT,{params:g})}createConvocation(e){return this.http.post(this.END_POINT,e)}updateConvocation(e,n){return this.http.put(`${this.END_POINT}/${e}`,n)}deleteConvocation(e){return this.http.delete(`${this.END_POINT}/${e}`)}finalizeConvocation(e){return this.http.put(`${this.END_POINT}/${e}/finalize`,{})}findAllParticipants(e){return this.http.get(`${this.END_POINT}/${e}/participants`)}updateAttendance(e,n){return this.http.put(`${this.END_POINT}/${e}/attendance`,n)}};l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=Y({token:l,factory:l.\u0275fac,providedIn:"root"});let t=l;return t})();var fi=["input"],gi=(t,l,i)=>({"p-radiobutton-label":!0,"p-radiobutton-label-active":t,"p-disabled":l,"p-radiobutton-label-focus":i});function vi(t,l){if(t&1){let i=x();a(0,"label",7),u("click",function(n){_(i);let o=m();return b(o.select(n))}),d(1),r()}if(t&2){let i=m(),e=I(3);Ye(i.labelStyleClass),p("ngClass",Ee(6,gi,e.checked,i.disabled,i.focused)),K("for",i.inputId)("data-pc-section","label"),s(),S(i.label)}}var _i=(t,l,i)=>({"p-radiobutton p-component":!0,"p-radiobutton-checked":t,"p-radiobutton-disabled":l,"p-radiobutton-focused":i}),bi=(t,l,i)=>({"p-radiobutton-box":!0,"p-highlight":t,"p-disabled":l,"p-focus":i}),hi={provide:pt,useExisting:Je(()=>Ge),multi:!0},Ci=(()=>{class t{accessors=[];add(i,e){this.accessors.push([i,e])}remove(i){this.accessors=this.accessors.filter(e=>e[1]!==i)}select(i){this.accessors.forEach(e=>{this.isSameGroup(e,i)&&e[1]!==i&&e[1].writeValue(i.value)})}isSameGroup(i,e){return i[0].control?i[0].control.root===e.control.control.root&&i[1].name===e.name:!1}static \u0275fac=function(e){return new(e||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ge=(()=>{class t{cd;injector;registry;value;formControlName;name;disabled;label;tabindex;inputId;ariaLabelledBy;ariaLabel;style;styleClass;labelStyleClass;onClick=new O;onFocus=new O;onBlur=new O;inputViewChild;onModelChange=()=>{};onModelTouched=()=>{};checked;focused;control;constructor(i,e,n){this.cd=i,this.injector=e,this.registry=n}ngOnInit(){this.control=this.injector.get(ct),this.checkName(),this.registry.add(this.control,this)}handleClick(i,e,n){i.preventDefault(),!this.disabled&&(this.select(i),n&&e.focus())}select(i){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.registry.select(this),this.onClick.emit({originalEvent:i,value:this.value}))}writeValue(i){this.checked=i==this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(i){this.onModelChange=i}registerOnTouched(i){this.onModelTouched=i}setDisabledState(i){this.disabled=i,this.cd.markForCheck()}onInputFocus(i){this.focused=!0,this.onFocus.emit(i)}onInputBlur(i){this.focused=!1,this.onModelTouched(),this.onBlur.emit(i)}focus(){this.inputViewChild.nativeElement.focus()}ngOnDestroy(){this.registry.remove(this)}checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this.throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}throwNameError(){throw new Error(`
          If you define both a name and a formControlName attribute on your radio button, their values
          must match. Ex: <p-radioButton formControlName="food" name="food"></p-radioButton>
        `)}static \u0275fac=function(e){return new(e||t)(ye(xe),ye(Ze),ye(Ci))};static \u0275cmp=w({type:t,selectors:[["p-radioButton"]],viewQuery:function(e,n){if(e&1&&W(fi,5),e&2){let o;Z(o=ee())&&(n.inputViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",formControlName:"formControlName",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[$([hi])],decls:7,vars:29,consts:[[3,"ngStyle","ngClass","click"],[1,"p-hidden-accessible"],["type","radio",3,"checked","disabled","value","focus","blur"],["input",""],[3,"ngClass"],[1,"p-radiobutton-icon"],[3,"class","ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(e,n){if(e&1){let o=x();a(0,"div",0),u("click",function(f){_(o);let g=I(3);return b(n.handleClick(f,g,!0))}),a(1,"div",1)(2,"input",2,3),u("focus",function(f){return n.onInputFocus(f)})("blur",function(f){return n.onInputBlur(f)}),r()(),a(4,"div",4),h(5,"span",5),r()(),v(6,vi,2,10,"label",6)}e&2&&(Ye(n.styleClass),p("ngStyle",n.style)("ngClass",Ee(21,_i,n.checked,n.disabled,n.focused)),K("data-pc-name","radiobutton")("data-pc-section","root"),s(),K("data-pc-section","hiddenInputWrapper"),s(),p("checked",n.checked)("disabled",n.disabled)("value",n.value),K("id",n.inputId)("name",n.name)("aria-labelledby",n.ariaLabelledBy)("aria-label",n.ariaLabel)("tabindex",n.tabindex)("aria-checked",n.checked)("data-pc-section","hiddenInput"),s(2),p("ngClass",Ee(25,bi,n.checked,n.disabled,n.focused)),K("data-pc-section","input"),s(),K("data-pc-section","icon"),s(),p("ngIf",n.label))},dependencies:[G,at,rt],encapsulation:2,changeDetection:0})}return t})(),$t=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=We({type:t});static \u0275inj=Ke({imports:[lt]})}return t})();var Si=()=>({size:"A4",margin:"0"}),wi=()=>({"-webkit-print-color-adjust":"exact"}),Di=()=>({padding:"0 !important",border:"none !important"}),Ti=()=>({"border-top":"1px solid #e5e7eb !important","border-top-left-radius":"6px !important","border-top-right-radius":"6px !important"}),Mi=()=>({"border-top-left-radius":"6px !important","border-top-right-radius":"6px !important"}),Vi=(t,l,i,e,n)=>({"@page":t,body:l,".p-editor-toolbar.ng-star-inserted.ql-toolbar.ql-snow":i,".p-editor-container .p-editor-content":e,".p-editor-container .p-editor-content .ql-editor":n});function Ai(t,l){if(t&1&&h(0,"button",4),t&2){let i=m(2);p("printSectionId","print-section-missing")("useExistingCss",!0)("previewOnly",!1)("openNewTab",!1)("printTitle",i.data.convocation.subject)("printStyle",Se(12,Vi,D(7,Si),D(8,wi),D(9,Di),D(10,Ti),D(11,Mi)))("bodyClass","p-2 bg-teal-50")}}function Ii(t,l){if(t&1&&v(0,Ai,1,18,"button",3),t&2){let i=m();y(0,i.data.convocation?0:-1)}}var Fi=(t,l)=>l.id;function Ni(t,l){if(t&1&&(a(0,"div",22),d(1),r()),t&2){let i=l.$implicit;s(),E(" ",i.residence.number," ")}}function Ri(t,l){if(t&1&&(a(0,"div",2,5)(2,"div",6)(3,"div",7),h(4,"img",8),a(5,"h1",9),d(6,"PORTAL DE LA VI\xD1A"),r()(),a(7,"h2",10),d(8),r(),a(9,"h3",11),d(10,"ASAMBLEA: REPORTE DE INASISTENCIA"),r(),a(11,"div",12)(12,"span",13),d(13,"Fecha & Hora de la asamblea: "),a(14,"span",14),d(15),z(16,"date"),r()(),a(17,"span",13),d(18,"Lugar: "),a(19,"span",14),d(20),r()()(),a(21,"div")(22,"p",15),d(23," Listado de los n\xFAmeros de casas de los "),a(24,"span",16),d(25,"INASISTENTES"),r(),d(26," en la asamblea: "),r(),a(27,"div",17)(28,"div",18),ie(29,Ni,2,1,"div",23,Fi),r()()(),a(31,"div",19)(32,"p")(33,"span",20),d(34,"NOTA:"),r(),d(35," Se les recuerda a los residentes que las inansistencias injustificadas ser\xE1n multadas con $20 (veinte d\xF3lares americanos). "),r(),a(36,"p",21),d(37,"LA DIRECTIVA"),r()()()()),t&2){let i=m();s(8),E(" ",i.data.convocation.subject," "),s(7),S(q(16,3,i.data.convocation.date,"dd 'de' MMMM 'del' yyyy 'a las' HH:mm ")),s(5),S(i.data.convocation.place),s(9),ne(i.data.missingList)}}var zt=(()=>{let l=class l{constructor(){this.data={}}};l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=w({type:l,selectors:[["app-convocation-attendance-missing-list-view"]],inputs:{data:"data"},standalone:!0,features:[$([R]),M],decls:3,vars:2,consts:[["position","right","styleClass","w-11 lg:w-8 bg-teal-50 ",3,"visible","visibleChange"],["pTemplate","header"],["id","print-section-missing"],["pButton","","label","Descargar","icon","pi pi-file-pdf","title","Descargar PDF","class","p-button p-button-raised p-button-rounded p-button-secondary p-button-sm","ngxPrint","",3,"printSectionId","useExistingCss","previewOnly","openNewTab","printTitle","printStyle","bodyClass"],["pButton","","label","Descargar","icon","pi pi-file-pdf","title","Descargar PDF","ngxPrint","",1,"p-button","p-button-raised","p-button-rounded","p-button-secondary","p-button-sm",3,"printSectionId","useExistingCss","previewOnly","openNewTab","printTitle","printStyle","bodyClass"],["content",""],[1,"flex","flex-column","gap-2","p-2"],[1,"flex","justify-content-center","relative"],["src","assets/images/logo-removebg.png","alt","logo",1,"w-8rem","mt-2","ml-2","absolute","top-0","left-0"],[1,"text-5xl","font-bold","mb-4"],[1,"text-center","font-bold","px-6","py-2","bg-teal-700","text-white","w-fit","m-auto","uppercase"],[1,"text-center","mt-2","mb-4"],[1,"flex","justify-content-between","mb-2"],[1,"font-bold"],[1,"font-normal"],[1,"my-2"],[1,"font-bold","uppercase","text-red-700"],[1,"flex","justify-content-center"],[1,"flex","flex-wrap",2,"width","98%"],[1,"mt-4"],[1,"font-bold","uppercase"],[1,"text-center","font-bold","mt-6"],[1,"p-1","py-2","w-3rem","text-center","text-xs","font-bold","border-1"],["class","p-1 py-2 w-3rem text-center text-xs font-bold border-1"]],template:function(n,o){n&1&&(a(0,"p-sidebar",0),u("visibleChange",function(f){return o.data.visible=f}),v(1,Ii,1,1,"ng-template",1)(2,Ri,38,6,"div",2),r()),n&2&&(p("visible",o.data.visible),s(2),y(2,o.data.convocation?2:-1))},dependencies:[Ne,Fe,V,R,A,me,qe,ze,Nt]});let t=l;return t})();var Oi=["dt1"];function ki(t,l){if(t&1){let i=x();a(0,"div",8)(1,"button",9),u("click",function(){_(i);let n=m();return b(n.showMissingList())}),r(),a(2,"button",10),u("click",function(){_(i);let n=I(9);return m(),I(3).clear(),b(n.value="")}),r(),a(3,"div",11)(4,"label",12),d(5,"Filtro: "),r(),a(6,"span",13),h(7,"i",14),a(8,"input",15,16),u("input",function(){_(i);let n=I(9);m();let o=I(3);return b(o.filterGlobal(n.value,"contains"))}),r()()()()}}function Bi(t,l){t&1&&(a(0,"tr")(1,"th"),d(2,"Casa"),r(),a(3,"th"),d(4,"Nombre Completo (Propietario/Residente)"),r(),a(5,"th"),d(6,"D.N.I. (Propietario/Residente)"),r(),a(7,"th"),d(8,"Fecha & hora de asistencia"),r(),a(9,"th"),d(10,"Nombre Completo (Asistencia)"),r(),a(11,"th"),d(12,"Asistencia"),r(),a(13,"th"),d(14,"Acci\xF3n"),r()())}function Pi(t,l){if(t&1&&d(0),t&2){let i=m().$implicit;E(" ",i.residence.user.names+" "+i.residence.user.surnames," ")}}function Li(t,l){t&1&&(a(0,"span",23),d(1,"Sin residente registrado"),r())}function ji(t,l){if(t&1&&d(0),t&2){let i=m().$implicit;E(" ",i.residence.user.dni," ")}}function $i(t,l){if(t&1){let i=x();a(0,"input",24),u("ngModelChange",function(n){_(i);let o=m().$implicit;return b(o.participant=n)}),r()}if(t&2){let i=m().$implicit;p("ngModel",i.participant)}}function zi(t,l){if(t&1&&d(0),t&2){let i=m().$implicit;E(" ",i.participant," ")}}function qi(t,l){if(t&1){let i=x();a(0,"div",8)(1,"div",25)(2,"p-radioButton",26),u("ngModelChange",function(n){_(i);let o=m().$implicit;return b(o.attendance=n)}),r(),a(3,"label",27),d(4,"Presente"),r()(),a(5,"div",25)(6,"p-radioButton",26),u("ngModelChange",function(n){_(i);let o=m().$implicit;return b(o.attendance=n)}),r(),a(7,"label",27),d(8,"Falta"),r()()()}if(t&2){let i=m().$implicit;s(2),p("value",!0)("id","present"+i.id)("ngModel",i.attendance),s(),p("htmlFor","present"+i.id),s(3),p("value",!1)("id","missing"+i.id)("ngModel",i.attendance),s(),p("htmlFor","missing"+i.id)}}var Hi=(t,l)=>({"text-blue-500":t,"text-red-500":l});function Qi(t,l){if(t&1&&(a(0,"span",28),d(1),r()),t&2){let i=m().$implicit;p("ngClass",ot(2,Hi,i.attendance,!i.attendance)),s(),E(" ",i.attendance?"Presente":"Falta"," ")}}function Yi(t,l){if(t&1){let i=x();a(0,"button",29),u("click",function(){_(i);let n=m().$implicit,o=m();return b(o.onRowEditInit(n))}),r()}if(t&2){let i=m(2);p("disabled",i.hasRowEdit)}}function Gi(t,l){if(t&1){let i=x();a(0,"button",30),u("click",function(){_(i);let n=m().$implicit,o=m();return b(o.onRowEditSave(n))}),r(),a(1,"button",31),u("click",function(){_(i);let n=m(),o=n.$implicit,c=n.rowIndex,f=m();return b(f.onRowEditCancel(o,c))}),r()}}var Ui=t=>({"bg-bluegray-100":t});function Xi(t,l){if(t&1&&(a(0,"tr",17)(1,"td",18),d(2),r(),a(3,"td"),v(4,Pi,1,1)(5,Li,2,0),r(),a(6,"td"),v(7,ji,1,1),r(),a(8,"td"),d(9),z(10,"date"),r(),a(11,"td")(12,"p-cellEditor"),v(13,$i,1,1,"ng-template",19)(14,zi,1,1,"ng-template",20),r()(),a(15,"td")(16,"p-cellEditor"),v(17,qi,9,8,"ng-template",19)(18,Qi,2,5,"ng-template",20),r()(),a(19,"td")(20,"div",21),v(21,Yi,1,1,"button",22)(22,Gi,2,0),r()()()),t&2){let i=l.$implicit,e=l.editing;p("pEditableRow",i)("ngClass",ve(11,Ui,i.residence.user==null)),s(2),E(" ",i.residence.number," "),s(2),y(4,i.residence.user?4:5),s(3),y(7,i.residence.user?7:-1),s(2),E(" ",q(10,8,i.attendanceDate,"EEEE, dd/MM/yyyy 'a las' hh:mm a")," "),s(12),y(21,e?-1:21),s(),y(22,e?22:-1)}}var Ji=()=>({"min-width":"50rem"}),Ki=()=>["residence.number","residence.user.surnames","residence.user.dni"],Ht=(()=>{let l=class l{constructor(){this.data={},this.loading=!0,this.convocationService=C(Qe),this.messageService=C(X),this.participantList=[],this.clonedParticipantList=[],this.hasRowEdit=!1,this.missingListData={}}ngOnChanges(e){e.data&&this.getAttendanceList()}getAttendanceList(){this.loading=!0,this.data.convocation&&this.data.visible&&this.convocationService.findAllParticipants(this.data.convocation.id).subscribe({next:e=>{this.participantList=e.data,setTimeout(()=>{this.loading=!1},300)},error:e=>{console.error(e)}})}onRowEditInit(e){this.clonedParticipantList[e.id]=Ce({},e),this.hasRowEdit=!0}onRowEditSave(e){this.hasRowEdit=!1,delete this.clonedParticipantList[e.id];let n={attendance:e.attendance,participant:e.participant,residence:e.residence.id};this.convocationService.updateAttendance(e.id,n).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:o.message}),this.getAttendanceList()},error:o=>{this.messageService.add({severity:"error",summary:"Error",detail:o.error.message}),this.getAttendanceList()}})}onRowEditCancel(e,n){this.hasRowEdit=!1,this.participantList[n]=this.clonedParticipantList[e.id],delete this.clonedParticipantList[e.id]}onPage(){let e=this.table.first,n=this.table.first+this.table.rows;this.hasRowEdit=!1,this.clonedParticipantList=[];for(let o=e;o<n;o++){let c=this.table.value[o];if(c&&this.table.isRowEditing(c)){this.table.cancelRowEdit(c);break}}}clearRowsEdit(){this.hasRowEdit=!1,this.clonedParticipantList=[];for(let e of this.participantList)if(this.table.isRowEditing(e)){this.table.cancelRowEdit(e);break}}showMissingList(){this.missingListData={convocation:this.data.convocation,missingList:this.participantList.filter(e=>!e.attendance),visible:!0}}};l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=w({type:l,selectors:[["app-convocation-attendance-management"]],viewQuery:function(n,o){if(n&1&&W(Oi,5),n&2){let c;Z(c=ee())&&(o.table=c.first)}},inputs:{data:"data"},standalone:!0,features:[$([R]),F,M],decls:8,vars:19,consts:[["styleClass","w-11 h-full","header","Listado de asistentes",3,"modal","draggable","resizable","visible","closeOnEscape","visibleChange","onHide"],["dialog",""],["paginatorDropdownAppendTo","body","dataKey","id","editMode","row","styleClass","shadow-4 border-round p-datatable-sm",3,"value","loading","paginator","pageLinks","rows","tableStyle","scrollable","scrollHeight","showJumpToPageDropdown","currentPageReportTemplate","globalFilterFields","onPage","onFilter"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"data"],[1,"flex","flex-column","lg:flex-row","gap-2"],["title","verInasistencias","pButton","","label","Ver listado de inasistencia","icon","pi pi-users",1,"p-button-sm","p-button-ripple","p-button-rounded","p-button-danger",3,"click"],["title","limpiarFiltro","pButton","","label","Limpiar b\xFAsqueda","icon","pi pi-filter-slash",1,"p-button-sm","p-button-ripple","p-button-rounded","p-button-help",3,"click"],[1,"ml-auto"],["for","globalFilter ",1,"mr-2"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","id","globalFilter","placeholder","N\xB0 de casa, Apellidos o D.N.I.",3,"input"],["inputSearch",""],[3,"pEditableRow","ngClass"],[1,"font-bold","text-teal-700"],["pTemplate","input"],["pTemplate","output"],[1,"flex","gap-1"],["title","editar","pButton","","pRipple","","label","Editar","type","button","pInitEditableRow","","icon","pi pi-pencil","class","p-button-rounded p-button-sm p-button-secondary",3,"disabled"],[1,"text-red-800"],["pInputText","","type","text",1,"p-inputtext-sm",3,"ngModel","ngModelChange"],[1,"inline-flex"],["name","attendance",3,"value","id","ngModel","ngModelChange"],[1,"ml-1",3,"htmlFor"],[1,"font-bold","uppercase",3,"ngClass"],["title","editar","pButton","","pRipple","","label","Editar","type","button","pInitEditableRow","","icon","pi pi-pencil",1,"p-button-rounded","p-button-sm","p-button-secondary",3,"disabled","click"],["title","aceptar","pButton","","pRipple","","type","button","pSaveEditableRow","","label","Guardar","icon","pi pi-check",1,"p-button-rounded","p-button-sm","p-button-success",3,"click"],["title","cancelar","pButton","","pRipple","","type","button","label","Cancelar","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-sm","p-button-danger",3,"click"]],template:function(n,o){if(n&1){let c=x();a(0,"p-dialog",0,1),u("visibleChange",function(g){return o.data.visible=g})("onHide",function(){_(c);let g=I(3);return b(g.clear())}),a(2,"p-table",2,3),u("onPage",function(){return o.onPage()})("onFilter",function(){return o.clearRowsEdit()}),v(4,ki,10,0,"ng-template",4)(5,Bi,15,0,"ng-template",5)(6,Xi,23,13,"ng-template",6),r()(),h(7,"app-convocation-attendance-missing-list-view",7)}n&2&&(p("modal",!0)("draggable",!1)("resizable",!1)("visible",o.data.visible)("closeOnEscape",!1),s(2),p("value",o.participantList)("loading",o.loading)("paginator",!0)("pageLinks",3)("rows",20)("tableStyle",D(17,Ji))("scrollable",!0)("scrollHeight","calc(100vh - 20.5rem)")("showJumpToPageDropdown",!0)("currentPageReportTemplate","{currentPage} de {totalPages} p\xE1ginas ({totalRecords} registros)")("globalFilterFields",D(18,Ki)),s(5),p("data",o.missingListData))},dependencies:[L,P,V,fe,ue,Dt,xt,Et,St,wt,A,me,G,Me,U,H,De,$t,Ge,ce,pe,R,zt]});let t=l;return t})();function Wi(t,l){if(t&1&&h(0,"app-error-input",5),t&2){let i=m();p("message",i.getErrorMessage("question",i.form))}}function Zi(t,l){if(t&1){let i=x();a(0,"p-button",7),u("onClick",function(){_(i);let n=m();return b(n.handleAccept())}),r(),a(1,"p-button",8),u("onClick",function(){_(i);let n=m();return n.sidebarData.response=null,b(n.handleClose.emit())}),r()}t&2&&(p("raised",!0)("rounded",!0),s(),p("raised",!0)("rounded",!0))}var Qt=(()=>{let l=class l{constructor(){this.sidebarData={},this.handleClose=new O,this.fb=C(Te),this.getErrorMessage=Ie,this.form=this.fb.group({id:[],question:["",k.required]})}ngOnChanges(e){e.sidebarData&&(this.form.reset(),this.form.patchValue(this.sidebarData.data))}handleAccept(){this.form.valid?(this.sidebarData.response=this.form.value,this.handleClose.emit()):Object.values(this.form.controls).forEach(e=>{e.invalid&&(e.markAsDirty(),e.updateValueAndValidity({onlySelf:!0}))})}};l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=w({type:l,selectors:[["app-assembly-votes-form"]],inputs:{sidebarData:"sidebarData"},outputs:{handleClose:"handleClose"},standalone:!0,features:[F,M],decls:9,vars:7,consts:[["styleClass","w-full md:w-6 lg: w-4",3,"visible","modal","draggable","resizable","header","visibleChange","onHide"],[1,"mt-4",3,"formGroup"],[1,"p-float-label","w-full"],["pInputTextarea","","formControlName","question","id","question","rows","5",1,"w-full"],["for","question"],[3,"message"],["pTemplate","footer"],["label","Aceptar","severity","success",3,"raised","rounded","onClick"],["label","Cancelar","severity","danger",3,"raised","rounded","onClick"]],template:function(n,o){if(n&1&&(a(0,"p-dialog",0),u("visibleChange",function(f){return o.sidebarData.visible=f})("onHide",function(){return o.sidebarData.response=null,o.handleClose.emit()}),a(1,"form",1)(2,"span",2)(3,"textarea",3),d(4,"      "),r(),a(5,"label",4),d(6,"Pregunta"),r()(),v(7,Wi,1,1,"app-error-input",5),r(),v(8,Zi,2,4,"ng-template",6),r()),n&2){let c;p("visible",o.sidebarData.visible)("modal",!0)("draggable",!1)("resizable",!1)("header",o.sidebarData.title),s(),p("formGroup",o.form),s(6),y(7,(c=o.form.get("question"))!=null&&c.dirty&&((c=o.form.get("question"))!=null&&c.invalid)?7:-1)}},dependencies:[L,P,V,A,B,At,Vt,Q,le,U,H,re,se,de,Ae]});let t=l;return t})();var Yt=(()=>{let l=class l{constructor(){this.END_POINT=ae.API_URL+"/protected/assembly-votes",this.http=C(oe)}createAssemblyQuestion(e){return this.http.post(this.END_POINT,e)}findAllAssemblyQuestions(e){return this.http.get(`${this.END_POINT}/convocation/${e}`)}deleteAssemblyQuestion(e){return this.http.delete(`${this.END_POINT}/${e}`)}updateAssemblyQuestion(e,n){return this.http.put(`${this.END_POINT}/${e}`,n)}toggleEnableVote(e){return this.http.put(`${this.END_POINT}/toggle-enabled-vote/${e}`,{})}};l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=Y({token:l,factory:l.\u0275fac,providedIn:"root"});let t=l;return t})();function en(t,l){if(t&1&&(a(0,"h2"),d(1," Pregunta: "),a(2,"span",3),d(3),r()()),t&2){let i=m();s(3),S(i.data.data.question)}}function tn(t,l){t&1&&(a(0,"tr")(1,"th"),d(2,"C\xE9dula"),r(),a(3,"th"),d(4,"Nombres"),r(),a(5,"th"),d(6,"Apellidos"),r(),a(7,"th"),d(8,"Voto"),r()())}function nn(t,l){t&1&&(a(0,"span",8),d(1,"A FAVOR"),r())}function on(t,l){t&1&&(a(0,"span",9),d(1,"EN CONTRA"),r())}function an(t,l){if(t&1&&(a(0,"tr")(1,"td"),d(2),r(),a(3,"td"),d(4),r(),a(5,"td"),d(6),r(),a(7,"td"),v(8,nn,2,0,"span",7)(9,on,2,0),r()()),t&2){let i=l.$implicit;s(2),S(i.voteBy.dni),s(2),S(i.voteBy.names),s(2),S(i.voteBy.surnames),s(2),y(8,i.vote?8:9)}}var rn=()=>({"min-width":"30rem"});function ln(t,l){if(t&1&&(a(0,"p",4),d(1,"Listado de votantes:"),r(),a(2,"p-table",5),v(3,tn,9,0,"ng-template",1)(4,an,10,4,"ng-template",6),r()),t&2){let i=m();s(2),p("value",i.data.data.votes)("tableStyle",D(4,rn))("scrollable",!0)("scrollHeight","calc(100vh - 9rem)")}}var Gt=(()=>{let l=class l{constructor(){this.data={visible:!1,title:"",data:null},this.onClosedHandler=new O}ngOnChanges(e){e.detailData&&this.data.visible}};l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=w({type:l,selectors:[["app-assembly-votes-detail"]],inputs:{data:"data"},outputs:{onClosedHandler:"onClosedHandler"},standalone:!0,features:[F,M],decls:3,vars:1,consts:[["position","right","styleClass","w-11 lg:w-4 bg-teal-50 ",3,"visible","visibleChange"],["pTemplate","header"],["pTemplate","content"],[1,"text-teal-700"],[1,"mb-4"],["styleClass","p-table-sm p-datatable-striped","styleClass","p-datatable-sm p-datatable-striped",3,"value","tableStyle","scrollable","scrollHeight"],["pTemplate","body"],["class","uppercase font-bold text-blue-600"],[1,"uppercase","font-bold","text-blue-600"],[1,"uppercase","font-bold","text-red-600"]],template:function(n,o){n&1&&(a(0,"p-sidebar",0),u("visibleChange",function(f){return o.data.visible=f}),v(1,en,4,1,"ng-template",1)(2,ln,5,5,"ng-template",2),r()),n&2&&p("visible",o.data.visible)},dependencies:[Ne,Fe,V,A,Q,fe,ue]});let t=l;return t})();function dn(t,l){if(t&1){let i=x();a(0,"div",6)(1,"p-button",7),u("onClick",function(){_(i);let n=m();return b(n.onOpenQuestionForm())}),r(),a(2,"p-button",8),u("onClick",function(){_(i);let n=m();return b(n.getQuestions())}),r()()}if(t&2){let i=m();s(),p("rounded",!0)("raised",!0)("disabled",i.assemblyVotationData.convocation.finalized),s(),p("rounded",!0)("raised",!0)}}var pn=(t,l)=>l.id,cn=t=>({"border-top-1 border-gray-300":t}),mn=t=>({"votation-in-process":t});function un(t,l){if(t&1){let i=x();a(0,"div",10)(1,"div",11)(2,"div",12)(3,"p",13),d(4,"Pregunta:"),r(),a(5,"p",14),d(6),r()(),a(7,"div",15)(8,"div",16)(9,"div",17)(10,"p",18)(11,"span",19),d(12,"Votos Totales: "),r(),d(13),r()(),a(14,"div",20)(15,"p",21),d(16,"Votos a favor"),r(),a(17,"p",18),d(18),r()(),a(19,"div",22)(20,"p",21),d(21,"Votos en contra"),r(),a(22,"p",18),d(23),r()()(),a(24,"div",23)(25,"div",24)(26,"p-button",25),u("onClick",function(){let o=_(i).$implicit,c=m(2);return b(c.onEnableQuestion(o))}),r(),a(27,"p-button",26),u("onClick",function(){let o=_(i).$implicit,c=m(2);return b(c.showVoteDetail(o))}),r()(),a(28,"div",24)(29,"p-button",27),u("onClick",function(){let o=_(i).$implicit,c=m(2);return b(c.onOpenQuestionForm(o))}),r(),a(30,"p-button",28),u("onClick",function(){let o=_(i).$implicit,c=m(2);return b(c.onDeleteQuestion(o))}),r()()()()()()}if(t&2){let i=l.$implicit,e=l.$index,n=m(2);p("ngClass",ve(19,cn,e!==0)),s(6),S(i.question),s(),p("ngClass",ve(21,mn,i.enabled)),s(6),E("",i.totalVotes," "),s(5),S(i.upVotes),s(5),S(i.downVotes),s(3),p("label",i.enabled?"Desactivar votaciones":"Activar votaciones")("rounded",!0)("raised",!0)("disabled",n.assemblyVotationData.convocation.finalized)("severity",i.enabled?"secondary":"success"),s(),p("rounded",!0)("raised",!0),s(2),p("rounded",!0)("raised",!0)("disabled",n.assemblyVotationData.convocation.finalized),s(),p("rounded",!0)("raised",!0)("disabled",n.assemblyVotationData.convocation.finalized)}}function fn(t,l){if(t&1&&(a(0,"div",9),ie(1,un,31,23,"div",29,pn),r()),t&2){let i=m();s(),ne(i.questions)}}var Ut=(()=>{let l=class l{constructor(){this.assemblyVotationData={},this.onClosed=new O,this.storageService=C(we),this.voteService=C(Yt),this.messageService=C(X),this.confirmationService=C(Ve),this.questions=[],this.detailData={visible:!1,title:"",data:null},this.sidebarData={visible:!1,title:"",data:null}}ngOnChanges(e){e.assemblyVotationData&&this.assemblyVotationData.visible&&this.getQuestions()}getQuestions(){this.voteService.findAllAssemblyQuestions(this.assemblyVotationData.convocation.id).subscribe({next:e=>{this.questions=e.data},error:e=>{this.messageService.add({severity:"error",summary:"Error",detail:"No se pudo obtener las preguntas"})}})}reset(){this.sidebarData={visible:!1,title:"",data:null,response:null}}onOpenQuestionForm(e){this.sidebarData={visible:!0,title:e?"Editar pregunta":"Nueva pregunta",data:e}}onDeleteQuestion(e){this.confirmationService.confirm({message:`\xBFEst\xE1s seguro de que quieres eliminar la pregunta? <p class="font-bold text-green-600">${e.question}</p>
      <br>
      <p class="font-bold text-red-600 mt-4">Esta acci\xF3n no se puede deshacer.</p>
`,header:"Confirmar eliminaci\xF3n de la pregunta",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",acceptIcon:"pi pi-trash mr-2",acceptLabel:"S\xED",rejectLabel:"No",accept:()=>{this.voteService.deleteAssemblyQuestion(e.id).subscribe({next:n=>{this.messageService.add({severity:"success",summary:"\xC9xito",detail:n.message}),this.getQuestions()},error:n=>{this.messageService.add({severity:"error",summary:"Error",detail:"No se pudo eliminar la pregunta"})}})}})}onCloseQuestionForm(){if(this.sidebarData.response){let e=this.storageService.getAuth();if(e){let n=this.sidebarData.response.id,o={question:this.sidebarData.response.question,convocation:this.assemblyVotationData.convocation.id,createdBy:e.id};n?this.voteService.updateAssemblyQuestion(n,o).subscribe({next:c=>{this.messageService.add({severity:"success",summary:"\xC9xito",detail:c.message}),this.reset(),this.getQuestions()},error:c=>{c.error?this.messageService.add({severity:"error",summary:"Error",detail:c.error.message}):this.messageService.add({severity:"error",summary:"Error",detail:"No se pudo actualizar la pregunta"}),this.reset()}}):this.voteService.createAssemblyQuestion(o).subscribe({next:c=>{this.messageService.add({severity:"success",summary:"\xC9xito",detail:c.message}),this.reset(),this.getQuestions()},error:c=>{c.error?this.messageService.add({severity:"error",summary:"Error",detail:c.error.message}):this.messageService.add({severity:"error",summary:"Error",detail:"No se pudo crear la pregunta"}),this.reset()}})}else this.messageService.add({severity:"error",summary:"Error",detail:"No se pudo obtener el token de autenticaci\xF3n"}),this.reset()}else this.reset()}onEnableQuestion(e){this.voteService.toggleEnableVote(e.id).subscribe({next:n=>{this.messageService.add({severity:"success",summary:"\xC9xito",detail:n.message}),this.getQuestions()},error:n=>{n.error?this.messageService.add({severity:"error",summary:"Error",detail:n.error.message}):this.messageService.add({severity:"error",summary:"Error",detail:"No se pudo activar/desactivar la pregunta"})}})}showVoteDetail(e){this.detailData={visible:!0,title:e.question,data:e}}};l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=w({type:l,selectors:[["app-assembly-manage-votes"]],inputs:{assemblyVotationData:"assemblyVotationData"},outputs:{onClosed:"onClosed"},standalone:!0,features:[F,M],decls:6,vars:9,consts:[["styleClass","w-11 h-full","header","Administraci\xF3n de votos",3,"modal","draggable","resizable","visible","closeOnEscape","visibleChange","onHide"],["layout","list","styleClass","w-full",3,"value","emptyMessage"],["pTemplate","header"],["pTemplate","list"],[3,"sidebarData","handleClose"],[3,"data"],[1,"flex","justify-content-between"],["label","Nuevo voto","icon","pi pi-plus","severity","info",3,"rounded","raised","disabled","onClick"],["label","Actualizar","icon","pi pi-refresh",3,"rounded","raised","onClick"],[1,"col-12"],[1,"flex","flex-column","sm:flex-row","sm:align-items-center","py-4","px-2","gap-3",3,"ngClass"],[1,"flex","justify-content-between","w-full","gap-2"],[1,"p-2","w-5","bg-gray-100","border-round"],[1,"font-bold","uppercase","text-indigo-600","mb-2"],[1,""],[1,"w-7","flex","gap-4","relative",3,"ngClass"],[1,"grid","m-0","shadow-1","border-1","bg-bluegray-800","border-round","text-lg","z-1","w-full"],[1,"col-12","border-bottom-1","flex","align-items-center","justify-content-center","text-yellow-300","border-white","font-bold"],[1,"text-center"],[1,"text-center","uppercase","mr-2"],[1,"col-6","border-right-1","border-white","flex","flex-column","justify-content-center","align-items-center","text-green-300","font-bold"],[1,"text-center","uppercase"],[1,"col-6","flex","flex-column","justify-content-center","align-items-center","text-red-300","font-bold"],[1,"grid","z-1","w-full"],[1,"col-6","flex","flex-column","justify-content-center","gap-2"],["styleClass","w-full","size","small",3,"label","rounded","raised","disabled","severity","onClick"],["label","Ver detalles","styleClass","w-full","size","small","severity","help",3,"rounded","raised","onClick"],["label","Editar","styleClass","w-full ","size","small","severity","warning",3,"rounded","raised","disabled","onClick"],["label","Eliminar","styleClass","w-full","size","small","severity","danger",3,"rounded","raised","disabled","onClick"],["class","flex flex-column sm:flex-row sm:align-items-center py-4 px-2 gap-3",3,"ngClass"]],template:function(n,o){n&1&&(a(0,"p-dialog",0),u("visibleChange",function(f){return o.assemblyVotationData.visible=f})("onHide",function(){return o.onClosed.emit()}),a(1,"p-dataView",1),v(2,dn,3,5,"ng-template",2)(3,fn,3,0,"ng-template",3),r()(),a(4,"app-assembly-votes-form",4),u("handleClose",function(){return o.onCloseQuestionForm()}),r(),h(5,"app-assembly-votes-detail",5)),n&2&&(p("modal",!0)("draggable",!1)("resizable",!1)("visible",o.assemblyVotationData.visible)("closeOnEscape",!1),s(),p("value",o.questions)("emptyMessage","No hay resultados para mostrar"),s(3),p("sidebarData",o.sidebarData),s(),p("data",o.detailData))},dependencies:[L,P,V,Le,Pe,A,B,Q,Qt,Gt,G],styles:['@charset "UTF-8";.votation-in-process[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;width:100%;height:100%;margin:auto;background-color:#0e8d41;opacity:.5;filter:blur(5px);transform:scale(1.02);animation:_ngcontent-%COMP%_pulsate 1s linear infinite}@keyframes _ngcontent-%COMP%_pulsate{0%{opacity:.8}50%{opacity:1}to{opacity:.8}}']});let t=l;return t})();function gn(t,l){if(t&1&&(a(0,"p",15),d(1,' La Directiva del Conjunto Residencial "Portal de la Vi\xF1a" '),a(2,"strong"),d(3,"CONVOCA"),r(),d(4," a tod@s los Cond\xF3min@s con car\xE1cter obligatorio a la "),a(5,"span",16),d(6),r(),d(7),z(8,"date"),r()),t&2){let i=m();s(6),S(i.getConvocationTypeSpanishTranslation(i.convocation.type)),s(),nt(" que se llevar\xE1 a cabo el d\xEDa ",q(8,3,i.convocation.date,"dd 'de' MMMM 'del' yyyy 'a las' HH:mm ")," en la ",i.convocation.place,". ")}}function vn(t,l){if(t&1&&(a(0,"div",17)(1,"span",18),d(2,"Fecha & Hora: "),a(3,"span",19),d(4),z(5,"date"),r()(),a(6,"span",18),d(7,"Lugar: "),a(8,"span",19),d(9),r()()()),t&2){let i=m();s(4),S(q(5,2,i.convocation.date,"dd 'de' MMMM 'del' yyyy 'a las' HH:mm ")),s(5),S(i.convocation.place)}}function _n(t,l){}var bn=()=>({size:"A4",margin:"0"}),hn=()=>({"-webkit-print-color-adjust":"exact"}),Cn=()=>({padding:"0 !important",border:"none !important"}),yn=()=>({"border-top":"1px solid #e5e7eb !important","border-top-left-radius":"6px !important","border-top-right-radius":"6px !important"}),xn=()=>({"border-top-left-radius":"6px !important","border-top-right-radius":"6px !important"}),En=(t,l,i,e,n)=>({"@page":t,body:l,".p-editor-toolbar.ng-star-inserted.ql-toolbar.ql-snow":i,".p-editor-container .p-editor-content":e,".p-editor-container .p-editor-content .ql-editor":n});function Sn(t,l){if(t&1){let i=x();a(0,"div",20),h(1,"button",21),a(2,"p-button",22),u("click",function(){_(i);let n=m();return b(n.visible=!1)}),r()()}if(t&2){let i=m();s(),p("printSectionId","print-section")("useExistingCss",!0)("previewOnly",!1)("openNewTab",!1)("printTitle",i.convocation.subject)("printStyle",Se(14,En,D(9,bn),D(10,hn),D(11,Cn),D(12,yn),D(13,xn)))("bodyClass","p-2 bg-teal-50"),s(),p("rounded",!0)("raised",!0)}}var Xt=(()=>{let l=class l{constructor(){this.convocation={},this.visible=!1,this.getConvocationTypeSpanishTranslation=ge,this.text=""}ngOnChanges(e){e.convocation&&this.convocation&&(this.text=this.convocation.description)}};l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=w({type:l,selectors:[["app-convocation-view"]],inputs:{convocation:"convocation",visible:"visible"},standalone:!0,features:[$([R]),F,M],decls:22,vars:10,consts:[["styleClass","w-11 lg:w-8 h-full","contentStyleClass","flex flex-column gap-4",3,"modal","draggable","resizable","visible","visibleChange"],["id","print-section"],["content",""],[1,"flex","justify-content-center","relative"],["src","assets/images/logo-removebg.png","alt","logo",1,"w-8rem","mt-2","ml-2","absolute","top-0","left-0"],[1,"text-5xl","font-bold","mb-4"],[1,"text-center","font-bold","px-6","py-2","bg-teal-700","text-white","w-fit","m-auto","uppercase"],[1,"text-center","mt-2"],[1,"text-center","mt-2","text-teal-700"],[1,"text-right","mt-2","mb-4","text-red-600"],[1,"text-gray-700"],["class","my-4 px-2"],["styleClass","h-fit",3,"ngModel","readonly","ngModelChange"],["pTemplate","header"],["pTemplate","footer"],[1,"my-4","px-2"],[1,"capitalize","font-bold"],[1,"flex","justify-content-between","mb-2"],[1,"font-bold"],[1,"font-normal"],[1,"flex","gap-2","justify-content-end","align-items-center"],["pButton","","label","Descargar","icon","pi pi-file-pdf","title","Descargar PDF","ngxPrint","",1,"p-button","p-button-raised","p-button-rounded","p-button-secondary",3,"printSectionId","useExistingCss","previewOnly","openNewTab","printTitle","printStyle","bodyClass"],["label","Cerrar","icon","pi pi-times","severity","danger",3,"rounded","raised","click"]],template:function(n,o){n&1&&(a(0,"p-dialog",0),u("visibleChange",function(f){return o.visible=f}),a(1,"div",1,2)(3,"div",3),h(4,"img",4),a(5,"h1",5),d(6,"PORTAL DE LA VI\xD1A"),r()(),a(7,"h2",6),d(8),r(),a(9,"h3",7),d(10,"CONVOCATORIA"),r(),a(11,"h4",8),d(12),r(),a(13,"h4",9)(14,"span",10),d(15,"COD:"),r(),d(16),r(),v(17,gn,9,6,"p",11)(18,vn,10,5),a(19,"p-editor",12),u("ngModelChange",function(f){return o.text=f}),v(20,_n,0,0,"ng-template",13),r()(),v(21,Sn,3,20,"ng-template",14),r()),n&2&&(p("modal",!0)("draggable",!1)("resizable",!1)("visible",o.visible),s(8),E(" ",o.convocation.subject," "),s(4),E(" ",o.getConvocationTypeSpanishTranslation(o.convocation.type)," "),s(4),E(" ",o.convocation.code," "),s(),y(17,o.convocation.type==="ASSEMBLY_ORDINARY"||o.convocation.type==="ASSEMBLY_EXTRAORDINARY"?17:18),s(2),p("ngModel",o.text)("readonly",!0))},dependencies:[L,P,V,$e,je,A,me,B,R,qe,ze,Me,H,De]});let t=l;return t})();var Jt=(()=>{let l=class l{constructor(){this.END_POINT=ae.API_URL+"/protected/minutes",this.http=C(oe)}findAllByConvocation(e){return this.http.get(`${this.END_POINT}/convocation/${e}`)}create(e,n){let o=new FormData;o.append("convocationId",e.toString()),o.append("file",n);let c=new st;return c.append("Content-Type","form-data"),this.http.post(this.END_POINT,o,{headers:c})}delete(e){return this.http.delete(`${this.END_POINT}/${e}`)}};l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=Y({token:l,factory:l.\u0275fac,providedIn:"root"});let t=l;return t})();function wn(t,l){t&1&&(a(0,"tr")(1,"th"),d(2,"Url"),r(),a(3,"th",6),d(4,"Eliminar"),r()())}function Dn(t,l){if(t&1){let i=x();a(0,"tr")(1,"td")(2,"a",7),d(3),r()(),a(4,"td")(5,"p-button",8),u("click",function(){let o=_(i).$implicit,c=m();return b(c.onDelete(o))}),r()()()}if(t&2){let i=l.$implicit;s(2),p("href",i.fileUrl,et),s(),S(i.fileName),s(2),p("rounded",!0)("raised",!0)}}var Kt=(()=>{let l=class l{constructor(){this.minutesService=C(Jt),this.messageService=C(X),this.data={convocation:0,visible:!1},this.showNew=!1,this.minutes=[],this.disabledActions=!1}ngOnChanges(e){e.data&&this.data.visible&&this.getMinutes()}getMinutes(){this.minutesService.findAllByConvocation(this.data.convocation).subscribe({next:e=>{this.minutes=e.data},error:e=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error obteniendo las actas de la convocatoria"})}})}onUpload(e,n){let o=e.files[0];this.disabledActions||(this.disabledActions=!0,o&&this.minutesService.create(this.data.convocation,o).subscribe({next:c=>{this.messageService.add({severity:"success",summary:"\xC9xito",detail:"Archivo subido correctamente"}),this.getMinutes(),n.clear(),this.disabledActions=!1},error:c=>{console.error(c),this.messageService.add({severity:"error",summary:"Error",detail:"Error subiendo el archivo"})}}))}onDelete(e){this.disabledActions=!0,this.minutesService.delete(e.id).subscribe({next:n=>{this.messageService.add({severity:"success",summary:"\xC9xito",detail:"Archivo eliminado correctamente"}),this.getMinutes(),this.disabledActions=!1},error:n=>{console.error(n),this.messageService.add({severity:"error",summary:"Error",detail:"Error eliminando el archivo"})}})}};l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=w({type:l,selectors:[["app-minutes-view"]],inputs:{data:"data"},standalone:!0,features:[F,M],decls:6,vars:9,consts:[["styleClass"," w-11 lg:w-6 h-full",3,"modal","draggable","resizable","visible","visibleChange","onHide"],["chooseLabel","Seleccione una acta en PDF","uploadLabel","Subir","cancelLabel","Cancelar","accept","application/pdf","chooseStyleClass","p-button-raised p-button-secondary","uploadStyleClass","p-button-raised p-button-success","cancelStyleClass","p-button-raised p-button-danger","removeStyleClass","p-button-raised p-button-danger p-button-rounded","styleClass","mb-2",3,"disabled","customUpload","uploadHandler"],["fu",""],["styleClass","p-datatable-sm p-datatable-striped",3,"scrollable","value","scrollHeight"],["pTemplate","header"],["pTemplate","body"],[1,"w-10rem"],["target","_blank",3,"href"],["icon","pi pi-trash","severity","danger",3,"rounded","raised","click"]],template:function(n,o){if(n&1){let c=x();a(0,"p-dialog",0),u("visibleChange",function(g){return o.data.visible=g})("onHide",function(){_(c);let g=I(2);return o.disabledActions=!1,b(g.clear())}),a(1,"p-fileUpload",1,2),u("uploadHandler",function(g){_(c);let N=I(2);return b(o.onUpload(g,N))}),r(),a(3,"p-table",3),v(4,wn,5,0,"ng-template",4)(5,Dn,6,4,"ng-template",5),r()()}n&2&&(p("modal",!0)("draggable",!1)("resizable",!1)("visible",o.data.visible),s(),p("disabled",o.disabledActions)("customUpload",!0),s(2),p("scrollable",!0)("value",o.minutes)("scrollHeight","calc(100vh - 24.5rem)"))},dependencies:[L,P,V,Ft,It,B,A,fe,ue]});let t=l;return t})();var Tn=["container"],Mn=["cov"];function Vn(t,l){t&1&&h(0,"p-calendar",28)}var An=(t,l)=>l.id;function In(t,l){if(t&1&&(a(0,"div",50)(1,"p",51),d(2," ASISTIERON: "),a(3,"span"),d(4),r()()(),a(5,"div",52)(6,"p",51),d(7," NO ASISTIERON: "),a(8,"span"),d(9),r()()()),t&2){let i=m().$implicit;s(4),S(i.totalPresent),s(5),S(i.totalMissing)}}function Fn(t,l){if(t&1){let i=x();a(0,"div",30)(1,"div",31)(2,"h2",32),d(3),r(),a(4,"div",33)(5,"h3",34)(6,"span",35),d(7,"C\xF3digo: "),r(),d(8),r(),a(9,"div",36)(10,"div",37)(11,"span",38),d(12,"Tipo:"),r(),h(13,"p-tag",39),r(),a(14,"div",37)(15,"span",38),d(16,"Finalizado:"),r(),h(17,"p-tag",40),r()(),a(18,"div",36)(19,"div",37)(20,"p")(21,"span",41),d(22," Fecha: "),r(),d(23),z(24,"date"),r(),a(25,"p")(26,"span",41),d(27," Lugar: "),r(),d(28),r(),a(29,"p",42)(30,"span",41),d(31," Creado Por: "),r(),d(32),r(),a(33,"p",43)(34,"span",41),d(35," \xDAltima actualizaci\xF3n: "),r(),d(36),r()(),a(37,"div",37)(38,"p")(39,"span",41),d(40," Hora de inicio: "),r(),d(41),z(42,"date"),r()()()(),a(43,"div",44)(44,"div",45)(45,"div",46)(46,"p-button",47),u("onClick",function(n){let c=_(i).$implicit,f=m(2),g=I(19);return b(f.toggleMenu(c,n,g))}),r(),a(47,"p-button",48),u("onClick",function(){let o=_(i).$implicit,c=m(2);return b(c.openForm(o))}),r(),a(48,"p-button",49),u("onClick",function(){let o=_(i).$implicit,c=m(2);return b(c.onDelete(o))}),r()()(),v(49,In,10,2),r()()()}if(t&2){let i=l.$implicit,e=m(2);s(),p("ngClass",e.getConvocationClassText(i.type)),s(),p("ngClass",e.getConvocationClass(i.type)),s(),E(" ",i.subject," "),s(5),E("",i.code," "),s(5),p("value",e.getConvocationTypeSpanishTranslation(i.type))("styleClass",e.getConvocationClass(i.type)),s(4),p("value",i.finalized?"SI":"NO")("severity",i.finalized?"success":"info"),s(6),E(" ",q(24,20,i.date,"EEEE, dd/MM/yyyy")," "),s(5),E(" ",i.place," "),s(4),E(" ",i.createdBy.names+" "+i.createdBy.surnames," "),s(4),E(" ",i.updatedBy.names+" "+i.updatedBy.surnames," "),s(5),E(" ",q(42,23,i.date,"HH:mm")," "),s(5),p("rounded",!0)("raised",!0),s(),p("rounded",!0)("raised",!0),s(),p("rounded",!0)("raised",!0),s(),y(49,i.type==="ASSEMBLY_ORDINARY"||i.type==="ASSEMBLY_EXTRAORDINARY"?49:-1)}}function Nn(t,l){if(t&1&&(a(0,"div",29),ie(1,Fn,50,26,"div",53,An),r()),t&2){let i=m();s(),ne(i.convocations)}}var Dr=(()=>{let l=class l extends ut{constructor(){super(),this.first=0,this.rows=10,this.totalItems=0,this.modalData={visible:!1,title:"",data:null,response:null},this.toolbarHeight=0,this.containerOptions={showNewButton:!0,showSearch:!1,dataLoading:!1},this.attendanceManagementData={convocation:{},visible:!1},this.assemblyVotationData={convocation:{},visible:!1},this.convocations=[],this.convocationMenu=[{label:"Opciones"}],this.minutesData={convocation:0,visible:!1},this.messageService=C(X),this.convocationService=C(Qe),this.confirmationService=C(Ve),this.datePipe=C(R),this.cdr=C(xe),this.fb=C(mt),this.getConvocationTypeSpanishTranslation=ge,this.getConvocationClass=Tt,this.getConvocationClassText=Mt,this.filterForm=this.fb.group({subject:[""],start:[],end:[],type:[]}),this.typeOptions=[{label:"Todos",value:null},{label:"Reuni\xF3n ordinaria de directivos",value:T.MEETING_ORDINARY},{label:"Reuni\xF3n extraordinaria de directivos",value:T.MEETING_EXTRAORDINARY},{label:"Asamblea ordinaria",value:T.ASSEMBLY_ORDINARY},{label:"Asamblea extraordinaria",value:T.ASSEMBLY_EXTRAORDINARY},{label:"Sesi\xF3n de directivos",value:T.SESSION}],this.stateOptions=[{label:"No",value:!1},{label:"Si",value:!0}],this.showInterval=!1}ngOnInit(){super.ngOnInit(),this.getConvocations()}ngAfterViewInit(){this.toolbarHeight=this.container.toolbar.getBlockableElement().clientHeight,this.cdr.detectChanges()}getConvocations(e,n,o,c,f){this.containerOptions.dataLoading=!0,this.convocationService.getConvocations(e,n,o,c,f).subscribe({next:g=>{let N=g.data;this.convocations=N.content,g.data,this.totalItems=N.totalItems,setTimeout(()=>{this.containerOptions.dataLoading=!1},300)},error:g=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error al obtener las convocatorias"})}})}openForm(e){this.modalData={visible:!0,title:e?"Editar convocatoria":"Nueva convocatoria",data:e,response:e}}onPageChange(e){this.first=e.first,this.getConvocations(this.filterForm.value.subject||void 0,this.filterForm.value.start||void 0,this.filterForm.value.end||void 0,this.filterForm.value.type||void 0,e.page)}onHandleClose(){if(this.modalData.response){let e=this.modalData.response.id;if(e){let n={subject:this.modalData.response.subject,description:this.modalData.response.description,date:this.modalData.response.date.getTime(),place:this.modalData.response.place,type:this.modalData.response.type,attendanceDeadline:this.modalData.response.attendanceDeadline?this.modalData.response.attendanceDeadline.getTime():void 0,updatedBy:this.modalData.response.updatedBy,finalized:this.modalData.response.finalized};this.convocationService.updateConvocation(e,n).subscribe({next:o=>{this.reset(),this.messageService.add({severity:"success",summary:"\xC9xito",detail:o.message}),this.getConvocations()},error:o=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error al actualizar la convocatoria"})}})}else{let n={subject:this.modalData.response.subject,description:this.modalData.response.description,date:this.modalData.response.date.getTime(),place:this.modalData.response.place,type:this.modalData.response.type,attendanceDeadline:this.modalData.response.attendanceDeadline?this.modalData.response.attendanceDeadline.getTime():void 0,createdBy:this.modalData.response.createdBy};this.convocationService.createConvocation(n).subscribe({next:o=>{this.reset(),this.messageService.add({severity:"success",summary:"\xC9xito",detail:o.message}),this.getConvocations()},error:o=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error al crear la convocatoria"})}})}}else this.reset()}onDelete(e){this.confirmationService.confirm({message:`\xBFEst\xE1s seguro de que quieres eliminar la convocatoria <span class="font-bold text-green-600">${e.subject}</span>?
      <br>
      <p class="mt-2"><span class="font-bold">Fecha & hora: </span>${this.datePipe.transform(e.date,"EEEE, dd 'de' MMMM 'del' yyyy 'a las' HH:mm ")} </p>
      <p class="font-bold text-red-600 mt-4">Esta acci\xF3n no se puede deshacer.</p>
`,header:"Confirmar eliminaci\xF3n de la convocatoria",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",acceptIcon:"pi pi-trash mr-2",acceptLabel:"S\xED",rejectLabel:"No",accept:()=>{this.convocationService.deleteConvocation(e.id).subscribe({next:n=>{this.messageService.add({severity:"success",summary:"\xC9xito",detail:n.message}),this.getConvocations()},error:n=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error al eliminar la convocatoria"})}})}})}toggleMenu(e,n,o){o.toggle(n);let c=[{label:"Ver convocatoria",id:"view",icon:"pi pi-eye",command:()=>{this.onViewConvocation(e)}},{label:"Finalizar convocatoria",id:"finalize",icon:"pi pi-check",command:()=>{this.onFinalizeConvocation(e)}},{label:"Asistencias",id:"attendances",icon:"pi pi-users",disabled:!0,command:()=>{this.onViewAsistences(e)}},{label:"Votaciones",id:"votes",icon:"pi pi-chart-bar",disabled:!0,command:()=>{this.onManageVotes(e)}},{label:"Actas",id:"minutes",icon:"pi pi-folder",command:()=>{this.onViewMinutes(e)}}];if(e.type===T.ASSEMBLY_ORDINARY||e.type===T.ASSEMBLY_EXTRAORDINARY){let f=c.find(N=>N.id==="attendances");f&&(f.disabled=!1);let g=c.find(N=>N.id==="votes");g&&(g.disabled=!1)}if(e.finalized){let f=c.find(g=>g.id==="finalize");f&&(f.disabled=!0)}this.convocationMenu[0].items=c}onViewMinutes(e){this.minutesData={convocation:e.id,visible:!0}}onViewConvocation(e){this.convocationView.visible=!0,this.convocationView.convocation=e,this.convocationView.ngOnChanges({convocation:{currentValue:e,previousValue:null,firstChange:!0,isFirstChange:()=>!0}})}onViewAsistences(e){this.attendanceManagementData={convocation:e,visible:!0}}onFinalizeConvocation(e){this.confirmationService.confirm({message:`\xBFEst\xE1s seguro de que quieres finalizar la <span class="font-bold">${ge(e.type)}</span> <span class="font-bold text-green-600">${e.subject}</span>?
      <br>
      <p class="mt-2"><span class="font-bold">Fecha & hora: </span>${this.datePipe.transform(e.date,"EEEE, dd 'de' MMMM 'del' yyyy 'a las' HH:mm ")} </p>
      <p class="font-bold text-red-600 mt-4">Esta acci\xF3n no se puede deshacer.</p>
`,header:"Confirmar finalizaci\xF3n de la "+ge(e.type).toLocaleLowerCase(),icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-success",rejectButtonStyleClass:"p-button-secondary",acceptIcon:"pi pi-check mr-2",acceptLabel:"S\xED",rejectLabel:"No",accept:()=>{this.convocationService.finalizeConvocation(e.id).subscribe({next:n=>{this.messageService.add({severity:"success",summary:"\xC9xito",detail:n.message}),this.getConvocations()},error:n=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error al finalizar la convocatoria"})}})}})}onManageVotes(e){this.assemblyVotationData={convocation:e,visible:!0}}reset(){this.modalData={visible:!1,title:"",data:null,response:null}}onClearFilter(){this.filterForm.reset()}onFilter(){this.filterForm.value,this.getConvocations(this.filterForm.value.subject||void 0,this.filterForm.value.start||void 0,this.filterForm.value.end||void 0,this.filterForm.value.type||void 0,0)}};l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=w({type:l,selectors:[["app-convocation"]],viewQuery:function(n,o){if(n&1&&(W(Tn,5),W(Mn,5)),n&2){let c;Z(c=ee())&&(o.container=c.first),Z(c=ee())&&(o.convocationView=c.first)}},standalone:!0,features:[$([R]),tt,M],decls:30,vars:25,consts:[[3,"options","onOpenForm"],["container",""],["customSearcher",""],["icon","pi pi-angle-down","label","Abrir filtros","styleClass","bg-white hover:bg-gray-200",3,"rounded","raised","text","click"],["filterButton",""],["styleClass","bg-gray-700 w-11 lg:w-30rem",3,"showCloseIcon","dismissable"],["op",""],[3,"formGroup"],[1,"flex","flex-column","gap-1"],[1,"flex","gap-1","w-full"],["styleClass","p-inputtext-sm w-full","formControlName","start","dateFormat","dd/mm/yy","appendTo","body",1,"w-full",3,"placeholder"],["styleClass","p-inputtext-sm w-full","class","w-full","placeholder","Fecha de fin","formControlName","end","dateFormat","dd/mm/yy","appendTo","body"],["onLabel","Intervalo","offLabel","Fecha","styleClass","p-button-sm w-full",3,"onChange"],["appendTo","body","formControlName","type","placeholder","Seleccine un tipo","styleClass","w-full p-inputtext-sm",1,"w-full",3,"options"],["type","text","pInputText","","placeholder","Asunto","formControlName","subject",1,"w-full","p-inputtext-sm"],[1,"flex","justify-content-between","mt-2"],["icon","pi pi-filter-slash","label","Limpiar","size","small",3,"outlined","onClick"],["icon","pi pi-filter","label","Filtrar","size","small",3,"outlined","onClick"],["appendTo","body",3,"model","popup"],["menu",""],[1,"flex","justify-content-center","mb-2"],[1,"shadow-1","w-full",3,"rows","first","currentPageReportTemplate","showJumpToPageDropdown","totalRecords","onPageChange"],["layout","grid","styleClass","w-full ",3,"value","emptyMessage"],["pTemplate","grid"],[3,"modalData","handleClose"],[3,"data"],[3,"assemblyVotationData","onClosed"],["cov",""],["styleClass","p-inputtext-sm w-full","placeholder","Fecha de fin","formControlName","end","dateFormat","dd/mm/yy","appendTo","body",1,"w-full"],[1,"grid","grid-nogutter","bg-teal-50","h-full"],[1,"col-12","lg:col-6","xl:col-4","p-3"],[1,"shadow-2","surface-border","border-round","w-full","h-full","flex","flex-column","bg-white",3,"ngClass"],[1,"text-center","text-lg","font-bold","text-white","py-3","px-2","border-round-top",3,"ngClass"],[1,"p-3","pb-2","flex","flex-column","gap-2"],[1,"text-red-600","text-right","text-base"],[1,"text-black-alpha-90"],[1,"flex","justify-content-between"],[1,"font-bold"],[1,"text-gray-900","mr-2"],[3,"value","styleClass"],[3,"value","severity"],[1,"text-gray-900"],[1,"text-xs","mt-2"],[1,"text-xs"],[1,"border-round-bottom","grid","m-0","overflow-hidden","text-white","mt-auto"],[1,"col-12"],[1,"flex","justify-content-end","align-items-center","gap-2"],["icon","pi pi-chevron-down","severity","secondary","label","Opciones","size","small",1,"p-button-rounded","p-button-raised",3,"rounded","raised","onClick"],["icon","pi pi-pencil","label","Editar","severity","warning","size","small",1,"p-button-rounded","p-button-raised",3,"rounded","raised","onClick"],["icon","pi pi-trash","severity","danger","label","Eliminar","size","small",1,"p-button-rounded","p-button-raised",3,"rounded","raised","onClick"],[1,"col-6","p-2","bg-indigo-700"],[1,"font-bold","text-center"],[1,"col-6","p-2","bg-red-700"],["class","col-12 lg:col-6 xl:col-4 p-3"]],template:function(n,o){if(n&1){let c=x();a(0,"app-container",0,1),u("onOpenForm",function(){return o.openForm()}),a(2,"div",2)(3,"p-button",3,4),u("click",function(g){_(c);let N=I(6);return b(N.toggle(g))}),r(),a(5,"p-overlayPanel",5,6)(7,"form",7)(8,"div",8)(9,"div",9),h(10,"p-calendar",10),v(11,Vn,1,0,"p-calendar",11),a(12,"p-toggleButton",12),u("onChange",function(){let g;return o.showInterval=!o.showInterval,(g=o.filterForm.get("end"))==null?null:g.setValue(null)}),r()(),h(13,"p-dropdown",13)(14,"input",14),a(15,"div",15)(16,"p-button",16),u("onClick",function(){return o.onClearFilter()}),r(),a(17,"p-button",17),u("onClick",function(){return o.onFilter()}),r()()()()()(),h(18,"p-menu",18,19),a(20,"div",20)(21,"p-paginator",21),u("onPageChange",function(g){return o.onPageChange(g)}),r()(),a(22,"p-dataView",22),v(23,Nn,3,0,"ng-template",23),r()(),a(24,"app-convocation-form",24),u("handleClose",function(){return o.onHandleClose()}),r(),h(25,"app-convocation-attendance-management",25),a(26,"app-assembly-manage-votes",26),u("onClosed",function(){return o.getConvocations(),o.first=0}),r(),h(27,"app-convocation-view",null,27)(29,"app-minutes-view",25)}n&2&&(p("options",o.containerOptions),s(3),p("rounded",!0)("raised",!0)("text",!0),s(2),p("showCloseIcon",!0)("dismissable",!1),s(2),p("formGroup",o.filterForm),s(3),p("placeholder",o.showInterval?"Fecha de inicio":"Fecha"),s(),y(11,o.showInterval?11:-1),s(2),p("options",o.typeOptions),s(3),p("outlined",!0),s(),p("outlined",!0),s(),p("model",o.convocationMenu)("popup",!0),s(3),p("rows",o.rows)("first",o.first)("currentPageReportTemplate","{currentPage} de {totalPages} p\xE1ginas ({totalRecords} registros)")("showJumpToPageDropdown",!0)("totalRecords",o.totalItems),s(),p("value",o.convocations)("emptyMessage","No hay resultados para mostrar"),s(2),p("modalData",o.modalData),s(),p("data",o.attendanceManagementData),s(),p("assemblyVotationData",o.assemblyVotationData),s(3),p("data",o.minutesData))},dependencies:[Rt,Le,Pe,V,jt,kt,Ot,R,G,A,B,gt,ft,Ht,_t,vt,Q,le,U,H,re,se,de,Pt,Bt,Be,ke,Oe,Re,ce,pe,ht,bt,Ut,Xt,Kt]});let t=l;return t})();export{Dr as ConvocationComponent};
