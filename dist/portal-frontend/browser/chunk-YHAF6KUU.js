import{a as oe}from"./chunk-T2PAM4KC.js";import{a as ie}from"./chunk-QFJMZTM2.js";import{a as X,b as ee,c as te,d as ne}from"./chunk-YGKFOOJ6.js";import{h as W,i as G,x as K}from"./chunk-OHCSBWXS.js";import"./chunk-APKN3PFA.js";import"./chunk-X6GEXHSG.js";import"./chunk-X5B2VV3T.js";import"./chunk-ZTWDMVRM.js";import{a as V}from"./chunk-P7FDEGEE.js";import"./chunk-XSSXK7EZ.js";import"./chunk-PWTX4GCB.js";import{e as z,h as Q,n as Z}from"./chunk-HXGQMCX4.js";import{a as k}from"./chunk-TDXTCVPJ.js";import"./chunk-WTM76CTQ.js";import{c as Y,e as J}from"./chunk-AXYD25ST.js";import{n as H}from"./chunk-VBSZGXZN.js";import{$ as U,Bc as w,Hb as s,Jb as _,Lb as $,Nc as B,Ob as j,Pb as d,S as L,Ta as p,Ub as S,Y as f,Yb as M,_b as R,db as m,ea as b,fa as T,fb as C,kb as u,lb as E,mb as v,nb as y,ob as l,pb as i,qb as x,ub as A,wb as D,xb as c}from"./chunk-HOTPW52P.js";var ae=(()=>{let n=class n{constructor(){this.END_POINT=k.API_URL+"/protected/financial-obligations",this.http=f(B)}getFinancialObligationsStatusByResidence(r){return this.http.get(`${this.END_POINT}/residence/${r}`)}getBlueParkingReport(){return this.http.get(`${this.END_POINT}/blue-parkings`)}getAliquotsReport(){return this.http.get(`${this.END_POINT}/aliquots`)}};n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function re(e,n){e&1&&(l(0,"p"),s(1,"No hay registros"),i())}function se(e,n){if(e&1&&(l(0,"p",8),s(1),i()),e&2){let t=c(2).$implicit;p(),_(" Meses de retraso: ",t.totalMonthsDelayed," ")}}function pe(e,n){if(e&1&&(l(0,"p",9),s(1),i()),e&2){let t=c(2).$implicit;p(),_(" Meses de retraso: ",t.totalMonthsDelayed," ")}}function ce(e,n){if(e&1&&m(0,se,2,1,"p",7)(1,pe,2,1),e&2){let t=c().$implicit;u(0,t.totalMonthsDelayed>0?0:1)}}function de(e,n){if(e&1&&(l(0,"p",6),s(1),i(),m(2,re,2,0,"p")(3,ce,2,1)),e&2){let t=n.$implicit;p(),_("Tipo: ",t.type,""),p(),u(2,t.totalMonthsDelayed<0?2:3)}}function me(e,n){if(e&1&&v(0,de,4,2,null,null,E),e&2){let t=n.$implicit;y(t.complement)}}function ue(e,n){if(e&1&&v(0,me,2,0,null,null,E),e&2){let t=c(3);y(t.obligationsStatusData.financialStatusDetails)}}function _e(e,n){if(e&1){let t=A();l(0,"div",2)(1,"label"),s(2,"Residencia "),i(),l(3,"p-dropdown",5),D("ngModelChange",function(a){b(t);let o=c(2);return T(o.selectedResidence=a)})("onChange",function(a){b(t);let o=c(2);return T(o.onResidenceChange(a))}),i()(),m(4,ue,2,0)}if(e&2){let t=c(2);p(3),C("options",t.residences)("ngModel",t.selectedResidence)("filter",!0),p(),u(4,t.selectedResidence?4:-1)}}function ge(e,n){if(e&1&&m(0,_e,5,4),e&2){let t=c();u(0,t.selectedDocumentType.value==="CARTA_ADEUDAMIENTO"?0:-1)}}function Ce(e,n){}function fe(e,n){}var I=()=>({size:"A4",margin:"0"}),F=()=>({"-webkit-print-color-adjust":"exact"}),q=()=>({padding:"0 !important",border:"none !important"}),P=()=>({"border-top":"1px solid #e5e7eb !important","border-top-left-radius":"6px !important","border-top-right-radius":"6px !important"}),O=()=>({"border-top-left-radius":"6px !important","border-top-right-radius":"6px !important"}),N=(e,n,t,r,a)=>({"@page":e,body:n,".p-editor-toolbar.ng-star-inserted.ql-toolbar.ql-snow":t,".p-editor-container .p-editor-content":r,".p-editor-container .p-editor-content .ql-editor":a});function xe(e,n){if(e&1){let t=A();l(0,"p-editor",10),D("ngModelChange",function(a){b(t);let o=c(2);return T(o.template=a)}),m(1,Ce,0,0,"ng-template",11),i(),l(2,"div",12)(3,"div",13),x(4,"img",14),l(5,"h1",15),s(6,"PORTAL DE LA VI\xD1A"),i()(),l(7,"p-editor",16),D("ngModelChange",function(a){b(t);let o=c(2);return T(o.template=a)}),m(8,fe,0,0,"ng-template",11),i()(),x(9,"button",17)}if(e&2){let t=c(2);C("modules",t.quillModules)("ngModel",t.template),p(7),C("ngModel",t.template)("readonly",!0),p(2),C("printSectionId","print-section")("useExistingCss",!0)("previewOnly",!1)("openNewTab",!1)("printTitle",t.selectedResidence.number+"-Carta de adeudamiento")("printStyle",S(16,N,d(11,I),d(12,F),d(13,q),d(14,P),d(15,O)))("bodyClass","p-2 bg-teal-50")}}function he(e,n){if(e&1&&m(0,xe,10,22),e&2){let t=c();u(0,t.selectedDocumentType.value==="CARTA_ADEUDAMIENTO"?0:-1)}}function be(e,n){e&1&&(l(0,"span",24),s(1,"Al d\xEDa"),i())}function Te(e,n){if(e&1&&(l(0,"span",25),s(1),i()),e&2){let t=c().$implicit,r=c(2);p(),_("",r.getPaidStatus(t)," meses de retraso ")}}function Ee(e,n){if(e&1&&(l(0,"div",22)(1,"p")(2,"strong"),s(3,"Parqueadero Cod.: "),i(),s(4),i(),l(5,"p")(6,"strong"),s(7,"Casa No.: "),i(),s(8),i(),l(9,"p")(10,"strong"),s(11,"Pagado hasta: "),i(),s(12),M(13,"date"),i(),l(14,"p")(15,"strong"),s(16,"Estado: "),i(),m(17,be,2,0,"span",23)(18,Te,2,1),i()()),e&2){let t=n.$implicit,r=c(2);p(4),_(" ",t.parking==null?null:t.parking.code,""),p(4),_(" ",t.residence.number,""),p(4),_(" ",R(13,4,t.paidUntil,"MMMM 'del' yyyy")," "),p(5),u(17,r.getPaidStatus(t)===0?17:18)}}function ve(e,n){if(e&1&&(l(0,"div",18)(1,"div",19),x(2,"img",14),l(3,"h1",15),s(4,"PORTAL DE LA VI\xD1A"),i()(),l(5,"h1",20),s(6," Reporte de parqueaderos azules "),i(),l(7,"div",21),v(8,Ee,19,7,"div",26,E),i()(),x(10,"button",17)),e&2){let t=c();p(8),y(t.incomes),p(2),C("printSectionId","print-section-cartera-parking")("useExistingCss",!0)("previewOnly",!1)("openNewTab",!1)("printTitle","Cartera parqueaderos azules")("printStyle",S(12,N,d(7,I),d(8,F),d(9,q),d(10,P),d(11,O)))("bodyClass","p-2 bg-teal-50")}}function ye(e,n){e&1&&(l(0,"span",24),s(1,"Al d\xEDa"),i())}function De(e,n){if(e&1&&(l(0,"span",25),s(1),i()),e&2){let t=c().$implicit,r=c(2);p(),_("",r.getPaidStatus(t)," meses de retraso ")}}function Se(e,n){if(e&1&&(l(0,"div",22)(1,"p")(2,"strong"),s(3,"Casa No.: "),i(),s(4),i(),l(5,"p")(6,"strong"),s(7,"Pagado hasta: "),i(),s(8),M(9,"date"),i(),l(10,"p")(11,"strong"),s(12,"Estado: "),i(),m(13,ye,2,0,"span",23)(14,De,2,1),i()()),e&2){let t=n.$implicit,r=c(2);p(4),_(" ",t.residence.number,""),p(4),_(" ",R(9,3,t.paidUntil,"MMMM 'del' yyyy")," "),p(5),u(13,r.getPaidStatus(t)===0?13:14)}}function Ae(e,n){if(e&1&&(l(0,"div",27)(1,"div",19),x(2,"img",14),l(3,"h1",15),s(4,"PORTAL DE LA VI\xD1A"),i()(),l(5,"h1",20),s(6," Reporte de alicuotas "),i(),l(7,"div",21),v(8,Se,15,6,"div",26,E),i()(),x(10,"button",17)),e&2){let t=c();p(8),y(t.incomes),p(2),C("printSectionId","print-section-cartera-aliquots")("useExistingCss",!0)("previewOnly",!1)("openNewTab",!1)("printTitle","Cartera alicuotas")("printStyle",S(12,N,d(7,I),d(8,F),d(9,q),d(10,P),d(11,O)))("bodyClass","p-2 bg-teal-50")}}var Ke=(()=>{let n=class n{constructor(){this.sotrageService=f(V),this.residenceService=f(oe),this.obligationService=f(ae),this.userService=f(ie),this.currentPresident={},this.documentTypeOptions=[],this.residences=[],this.incomes=[],this.obligationsStatusData={},this.template=`
  <p class="ql-align-right">Ambato, __ de ___ del 20__</p>
      <p class="ql-align-right"><br></p>
      <p class="ql-align-right"><br></p>
          <p class="ql-align-center">
            <strong class="ql-size-huge">CERTIFICACI\xD3N</strong>
          </p>
          <br>
        `,this.quillModules={toolbar:[[{size:["small",!1,"large","huge"]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],[{align:[]}]]}}ngOnInit(){let r=this.sotrageService.getAuth();if(r){this.userService.findPresident().subscribe(g=>{this.currentPresident=g.data});let a=r.authorities,o=!1,h=!1;a.forEach(g=>{o||(o=g.authority==="ROLE_PRESIDENT"),h||(h=g.authority==="ROLE_TREASURER")}),o&&this.documentTypeOptions.push({label:"Carta de no adeudamiento",value:"CARTA_ADEUDAMIENTO"}),h&&(this.documentTypeOptions.push({label:"Reporte de Parqueaderos Azules",value:"CARTERA_PARQUEADEROS_AZULES"}),this.documentTypeOptions.push({label:"Reporte de Alicuotas",value:"CARTERA_ALICUOTAS"}))}}onDocumentTypeChange(r){let a=r.value;this.reset(),r.value&&(a.value==="CARTA_ADEUDAMIENTO"?this.residenceService.findAllWithOutPagination().subscribe(o=>{this.residences=o.data}):a.value==="CARTERA_PARQUEADEROS_AZULES"?this.obligationService.getBlueParkingReport().subscribe(o=>{this.incomes=o.data}):a.value==="CARTERA_ALICUOTAS"&&this.obligationService.getAliquotsReport().subscribe(o=>{console.log(o),this.incomes=o.data}))}onResidenceChange(r){let a=r.value;a.user&&(this.template=`
      <p class="ql-align-right">Ambato, __ de ___ del 20__</p>
      <p class="ql-align-right"><br></p>
      <p class="ql-align-right"><br></p>
    <p class="ql-align-center"><strong class="ql-size-huge">CERTIFICACI\xD3N</strong></p>
    <p class="ql-align-center"><br></p>
    <p class="ql-align-justify">Una vez revisada la documentaci\xF3n que reposa en tesorer\xEDa, tengo a bien certificar que el se\xF1or $owner, con CI. $dni, propietario de la casa No. $number, se encuentra al d\xEDa en el pago de expensas (Al\xEDcuotas mensuales), por lo que no registra ning\xFAn valor pendiente, esta cancelado hasta el mes de __ del 20__.</p>
    <p class="ql-align-justify"><br></p>
    <p class="ql-align-justify">Es todo cuanto puedo certificar en honor a la verdad, el interesado puede hacer uso del presente documento en lo la ley le faculte.</p>
    <p class="ql-align-justify"><br></p>
    <p class="ql-align-justify"><strong>Atentamente.</strong></p>
    <p class="ql-align-justify"><br></p>
    <p class="ql-align-center"><br></p>
    <p class="ql-align-center"><br></p>
    <p class="ql-align-center"><br></p>
    <p class="ql-align-center"><br></p>
    <p class="ql-align-center">$president_name</p>
    <p class="ql-align-center">$president_dni</p>
    <p class="ql-align-center"><br></p>
    <p class="ql-align-center"><strong>PRESIDENTE DEL CONJUNTO HABITACIONAL</strong></p>
    <p class="ql-align-center"><strong>EL PORTAL DE LA VI\xD1A 20__-20__</strong></p>
    `,this.template=this.template.replaceAll("$owner",a.user.names+" "+a.user.surnames),this.template=this.template.replaceAll("$dni",a.user.dni),this.template=this.template.replaceAll("$number",a.number),this.template=this.template.replaceAll("$president_name",this.currentPresident.names+" "+this.currentPresident.surnames),this.template=this.template.replaceAll("$president_dni",this.currentPresident.dni)),r.value&&this.obligationService.getFinancialObligationsStatusByResidence(a.id).subscribe(o=>{this.obligationsStatusData=o.data})}reset(){this.selectedResidence=void 0,this.incomes=[]}getPaidStatus(r){let a=new Date,o=new Date(r.paidUntil);return a<=o?0:(a.getFullYear()-o.getFullYear())*12+(a.getMonth()-o.getMonth())}};n.\u0275fac=function(a){return new(a||n)},n.\u0275cmp=U({type:n,selectors:[["app-documents"]],standalone:!0,features:[$([w]),j],decls:11,vars:6,consts:[[1,"border-round","shadow-4","bg-teal-50","w-full","px-2","py-3","flex","gap-3"],[1,"flex","flex-column","gap-3","w-30rem"],[1,"flex","gap-2","flex-column"],["placeholder","Seleccione un tipo de documento","optionLabel","label","styleClass","w-25rem",3,"options","ngModel","ngModelChange","onChange"],[1,"w-full","p-2"],["placeholder","Seleccione una residencia","optionLabel","number","filterBy","number","styleClass","w-20rem",3,"options","ngModel","filter","ngModelChange","onChange"],[1,"font-bold","text-teal-600"],["class","font-bold text-red-600"],[1,"font-bold","text-red-600"],[1,"font-bold","text-green-600"],["styleClass","bg-white",3,"modules","ngModel","ngModelChange"],["pTemplate","header"],["id","print-section",1,"hidden"],[1,"flex","justify-content-center","relative","mb-4","align-items-center","h-7rem"],["src","assets/images/logo-removebg.png","alt","logo",1,"w-8rem","mt-2","ml-2","absolute","top-0","left-0"],[1,"text-5xl","font-bold","text-teal-700"],["styleClass","h-fit",3,"ngModel","readonly","ngModelChange"],["title","Descargar en PDF","pButton","","label","Descargar","icon","pi pi-file-pdf","ngxPrint","",1,"p-button","p-button-raised","p-button-rounded","p-button-secondary","mt-3",3,"printSectionId","useExistingCss","previewOnly","openNewTab","printTitle","printStyle","bodyClass"],["id","print-section-cartera-parking"],[1,"flex","justify-content-center","relative","mb-2","align-items-center","h-7rem"],[1,"text-center","font-bold","px-6","py-2","bg-teal-700","text-white","w-fit","m-auto","uppercase","mb-3"],[1,"grid","p-3","gap-2"],[1,"col-4","shadow-1","border-round","bg-white"],["class","text-green-600"],[1,"text-green-600"],[1,"text-red-600"],["class","col-4 shadow-1 border-round bg-white"],["id","print-section-cartera-aliquots"]],template:function(a,o){a&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"label"),s(4,"Tipo de documento: "),i(),l(5,"p-dropdown",3),D("ngModelChange",function(g){return o.selectedDocumentType=g})("onChange",function(g){return o.onDocumentTypeChange(g)}),i()(),m(6,ge,1,1),i(),l(7,"div",4),m(8,he,1,1)(9,ve,11,18)(10,Ae,11,18),i()()),a&2&&(p(5),C("options",o.documentTypeOptions)("ngModel",o.selectedDocumentType),p(),u(6,o.selectedDocumentType?6:-1),p(2),u(8,o.selectedDocumentType&&o.selectedResidence?8:-1),p(),u(9,o.selectedDocumentType&&o.selectedDocumentType.value==="CARTERA_PARQUEADEROS_AZULES"?9:-1),p(),u(10,o.selectedDocumentType&&o.selectedDocumentType.value==="CARTERA_ALICUOTAS"?10:-1))},dependencies:[G,W,H,J,Y,K,Z,z,Q,ee,X,ne,te,w],styles:[".ql-align-center[_ngcontent-%COMP%]{text-align:center}.ql-size-huge[_ngcontent-%COMP%]{font-size:2.5em}.ql-align-justify[_ngcontent-%COMP%]{text-align:justify}ol[_ngcontent-%COMP%]{list-style-type:decimal;margin-left:16px}ul[_ngcontent-%COMP%]{list-style-type:disc;margin-left:16px}"]});let e=n;return e})();export{Ke as DocumentsComponent};
